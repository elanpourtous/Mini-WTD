<!-- üí¨ Chatbot Mini-WTD + Webcam + Assistant d‚Äôobservation -->
<button id="mwt-chat-toggle"
        class="mwt-chat-fab"
        type="button"
        aria-label="Ouvrir le chatbot Mini-WTD"
        aria-haspopup="dialog"
        aria-expanded="false"
        aria-controls="mwt-chat-panel">
  üí¨
</button>

<section id="mwt-chat-panel"
         class="mwt-chat-panel"
         role="dialog"
         aria-modal="false"
         aria-hidden="true"
         aria-labelledby="mwt-chat-title">
  <header class="mwt-chat-header">
    <div class="mwt-chat-header__text">
      <h2 id="mwt-chat-title">Mini-WTD ¬∑ Chat inclusion & adaptation</h2>
      <small>
        Pour les dirigeants press√©s, les RH, les r√©f√©rents handicap et les partenaires
        qui veulent des r√©ponses claires, sans langue de bois.
      </small>
      <p class="mwt-chat-tagline">
        Coach IA : Patrick Billy ‚Äî concepteur de Mini-WTD, cuisinier LDL & designer inclusif.
      </p>
    </div>
    <button type="button"
            id="mwt-chat-close"
            class="mwt-chat-close"
            aria-label="Fermer le chatbot">
      ‚úï
    </button>
  </header>

  <!-- Zone de messages du chatbot -->
  <div id="mwt-chat-body"
       class="mwt-chat-body"
       aria-live="polite">
    <!-- Les messages seront inject√©s ici par assets/js/chatbot.js -->
  </div>

  <!-- Bloc Webcam + Assistant d‚Äôobservation / adaptation -->
  <div class="mwt-webcam-box" aria-live="polite">
    <strong>Module webcam Mini-WTD (d√©mo)</strong><br>
    Cet outil sert √† observer une situation de travail pour discuter d‚Äôadaptations.
    Il ne fournit <strong>aucun diagnostic m√©dical</strong> et ne doit pas √™tre utilis√©
    pour juger la sant√© de la personne.
    <div class="mwt-webcam-actions">
      <button type="button"
              id="mwt-webcam-start">
        Activer la webcam
      </button>
      <button type="button"
              id="mwt-webcam-stop">
        Arr√™ter
      </button>
    </div>

    <video id="mwt-webcam-video"
           autoplay
           playsinline
           style="width:100%;margin-top:.25rem;display:none;"
           aria-hidden="true"></video>

    <hr>

    <!-- Assistant d‚Äôobservation / adaptation -->
    <strong>Assistant d‚Äôobservation Mini-WTD</strong>
    <p style="font-size:0.8rem;margin-top:0.25rem;">
      Remplis ce mini-formulaire √† partir de ce que tu vois (et de ce que la personne
      d√©crit). L‚Äôoutil g√©n√®re une synth√®se pour pr√©parer un am√©nagement ou une prise
      de contact avec la m√©decine du travail, la MDPH, Cap Emploi ou l‚ÄôAgefiph.
    </p>

    <form id="mwt-observer-form"
          class="mwt-observer-form">
      <!-- Type de poste -->
      <label for="mwt-job-type">
        Type principal de poste
      </label>
      <select id="mwt-job-type" name="jobType">
        <option value="">Choisir‚Ä¶</option>
        <option value="bureau">Poste de bureau / travail sur √©cran</option>
        <option value="manutention">Manutention / gestes physiques</option>
        <option value="accueil">Accueil / relationnel</option>
        <option value="mixte">Poste mixte / polyvalent</option>
      </select>

      <!-- Contexte (recrutement / maintien / retour) -->
      <label for="mwt-context-type">
        Contexte de la situation
      </label>
      <select id="mwt-context-type" name="contextType">
        <option value="">Choisir‚Ä¶</option>
        <option value="recrutement">Test de recrutement</option>
        <option value="maintien">Maintien dans l‚Äôemploi</option>
        <option value="retour">Retour apr√®s arr√™t / maladie</option>
      </select>

      <!-- Points de vigilance observ√©s -->
      <fieldset>
        <legend>Ce que tu observes ou que la personne signale</legend>

        <label>
          <input type="checkbox" name="issues" value="fatigue">
          Fatigue rapide / besoin de pauses
        </label>

        <label>
          <input type="checkbox" name="issues" value="gestes">
          Difficult√© sur certains gestes / mouvements
        </label>

        <label>
          <input type="checkbox" name="issues" value="deplacements">
          Difficult√© pour les d√©placements (locaux, escaliers, trajets‚Ä¶)
        </label>

        <label>
          <input type="checkbox" name="issues" value="concentration">
          Difficult√©s de concentration / surcharge d‚Äôinformations
        </label>

        <label>
          <input type="checkbox" name="issues" value="communication">
          Difficult√©s de communication (oral, √©crit, bruit‚Ä¶)
        </label>

        <label>
          <input type="checkbox" name="issues" value="securite">
          Risque s√©curit√© identifi√© (chute, crise, machine, etc.)
        </label>
      </fieldset>

      <!-- Description des 2 photos (interpr√©tation humaine) -->
      <label for="mwt-photo-room">
        Photo 1 ‚Äî Description de la pi√®ce / du poste de travail
      </label>
      <textarea id="mwt-photo-room"
                name="photoRoom"
                rows="2"
                placeholder="Ex : bureau partag√©, passage √©troit, c√¢bles au sol, √©cran √† gauche, beaucoup de bruit‚Ä¶"></textarea>

      <label for="mwt-photo-person">
        Photo 2 ‚Äî Description du candidat / salari√© en situation
        (sans jugement sur la personne)
      </label>
      <textarea id="mwt-photo-person"
                name="photoPerson"
                rows="2"
                placeholder="Ex : utilise une canne, posture pench√©e, s‚Äôassoit fr√©quemment, doit se lever souvent, etc."></textarea>

      <!-- Co√ªt estim√© des adaptations -->
      <label for="mwt-cost-level">
        Estimation grossi√®re du co√ªt des adaptations envisag√©es
        (ressenti, pas un devis)
      </label>
      <select id="mwt-cost-level" name="costLevel">
        <option value="">Je ne sais pas</option>
        <option value="faible">Faible (organisation, petits achats &lt; 500‚Ç¨)</option>
        <option value="moyen">Moyen (am√©nagement ponctuel, mat√©riel sp√©cifique)</option>
        <option value="eleve">√âlev√© / complexe</option>
      </select>

      <!-- Notes libres -->
      <label for="mwt-observer-notes">
        Notes compl√©mentaires (facultatif)
      </label>
      <textarea id="mwt-observer-notes"
                name="notes"
                rows="3"
                placeholder="Infos utiles : rythme, douleur, pr√©f√©rences, contraintes du service, retour de la personne‚Ä¶"></textarea>

      <button type="submit">
        G√©n√©rer la synth√®se d‚Äôadaptation
      </button>
    </form>

    <div id="mwt-observer-result"
         class="mwt-observer-result"
         aria-live="polite"
         style="margin-top:0.5rem;font-size:0.8rem;">
      <!-- Synth√®se g√©n√©r√©e par assets/js/observer.js -->
    </div>
  </div>

  <!-- Formulaire principal du chatbot -->
  <form id="mwt-chat-form"
        class="mwt-chat-footer">
    <label class="sr-only" for="mwt-chat-input">
      Votre question pour Mini-WTD
    </label>
    <input id="mwt-chat-input"
           type="text"
           autocomplete="off"
           placeholder="Posez une question sur Mini-WTD, le handicap, les adaptations‚Ä¶">
    <button type="submit">
      Envoyer
    </button>
  </form>
</section>
